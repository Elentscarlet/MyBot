# 默认技能：根基加点赋予============================================
# type，target，stop_propagation 字段目前无效
- id: basic_attack
  name: 普攻
  type: active
  cost: { mp: 0 }
  cd: 0
  target: enemy_single
  triggers:
    - event_type: "attack"
      is_attacker: true
      priority: 0
      stop_propagation: false
  effects:
    - op: "damage"
      formula: "max(1, source.ATK)"
      can_crit: true
      crit_multiplier: 1.5

- id: active_power
  name: 力量打击
  type: active
  cost: { mp: 0 }
  cd: 3
  target: enemy_single
  triggers:
    - event_type: "attack"
      is_attacker: true
      priority: 2
      stop_propagation: false
  effects:
    - op: "damage"
      formula: "source.ATK * 1.3"
      damage_type: "physical"
      can_crit: true
      crit_multiplier: 1.5

- id: attack_bonus
  name: 连击
  type: active
  cost: { mp: 0 }
  cd: 2
  triggers:
    - event_type: "attack"
      is_attacker: true
      priority: 2
      stop_propagation: false
  effects:
    - op: "damage"
      formula: "source.ATK * 1.1"
      damage_type: "physical"
      can_crit: true
      crit_multiplier: 2.0
    - op: "damage"
      formula: "source.ATK * 1.1"
      damage_type: "physical"
      can_crit: true
      crit_multiplier: 2.0

# 被动技能
- id: passive_thorns
  name: 铜墙铁壁
  type: passive
  cost: { mp: 0 }
  cd: 1
  triggers:
    - event_type: "damage_calc"
      is_attacker: false
      conditions:
        - expr: "damage > 0 and damage_type == 'physical'"
      stop_propagation: false
  effects:
    - op: "damage_reduction"
      reduction: "damage * 0.5"

- id: life_steal
  name: 吸血
  type: active
  cost: { mp: 0 }
  cd: 3
  triggers:
    - event_type: "after_take_damage"
      is_attacker: true
      priority: 2
      stop_propagation: false
  effects:
    - op: "leech"
      formula: "damage * 0.3"

# 装备技能，随机抽取：============================================

- id: thorns
  name: 荆棘
  type: passive
  cost: { mp: 0 }
  cd: 0
  triggers:
    - event_type: "after_take_damage"
      is_attacker: false
      conditions:
        - expr: "damage > 0 and damage_type == 'physical'"
      stop_propagation: false
  effects:
    - op: "reflect_damage"
      formula: "max(1, source.DEF*0.5)"